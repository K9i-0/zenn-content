---
title: "ã€Dart3ã€‘type_literal_in_constant_patternã®ã™ã™ã‚"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Dart", "Flutter"]
publication_name: yumemi_inc
published: false
---
# ã¯ã˜ã‚ã«
çš†ã•ã‚“Dart3ã«ã¯æ…£ã‚Œã¾ã—ãŸã‹ï¼Ÿåƒ•ã¯ã‚ã¾ã‚Šä½¿ã„ã“ãªã›ã¦ã„ãªã„ã§ã™ğŸ˜‡
ä»Šå›ã¯Dart3ä½¿ã†æ™‚type_literal_in_constant_patternã£ã¦Lintãƒ«ãƒ¼ãƒ«ã‚’æœ‰åŠ¹ã«ã—ãªã„ã¨ç½ ã ãªã€œã¨æ€ã£ãŸã®ã§å…±æœ‰ã—ã¾ã™ã€‚

# æœ¬ç·¨

è‡ªåˆ†ãŒç½ ã¨æ„Ÿã˜ãŸéƒ¨åˆ†ã«ã¤ã„ã¦è§¦ã‚Œã¦ã„ãã¾ã™ã€‚

## å¤‰æ•°ã®Typeã§ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªæ›¸ãæ–¹

Object?å‹ã®å¤‰æ•°xã®Typeã§ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã™ã‚‹ã¨ãã€ã‚·ãƒ³ãƒ—ãƒ«ãªæ›¸ãæ–¹ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚
```dart:ifæ–‡ã®å ´åˆ(Variable patterns + Wildcard patterns)
void f(Object? x) {
  if (x case num _) {
    print('int or double');
  }
}
```

```dart:ifæ–‡ã®å ´åˆ(Object patterns)
void f2(Object? x) {
  if (x case num()) {
    print('int or double');
  }
}
```

```dart:switchæ–‡ã®å ´åˆ(Variable patterns + Wildcard patterns)
void f3(Object? x) {
  switch (x) {
    case num _:
      print('int or double');
  }
}
```


```dart:switchæ–‡ã®å ´åˆ(Object patterns)
void f4(Object? x) {
  switch (x) {
    case num():
      print('int or double');
  }
}
```

Variable patternsã€Wildcard patternsãªã©ã«ã¤ã„ã¦ã¯ä»¥ä¸‹å‚ç…§

https://dart.dev/language/pattern-types

## æ›´ã«ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ãŸã„
ã©ã†ã›ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããªã‚‰ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ãŸã„ã§ã™ã‚ˆã­ã€‚ãã“ã§å…ˆç¨‹ã®ã‚±ãƒ¼ã‚¹ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã¿ãŸããªã‚‹äººã‚‚ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚

```dart:ifæ–‡ã®å ´åˆ(???)
void f5(Object? x) {
  if (x case num) {
    print('int or double');
  }
}
```

```dart:switchæ–‡ã®å ´åˆ(???)
void f6(Object? x) {
  switch (x) {
    case num:
      print('int or double');
  }
}
```

f5ã¨f6ã®æ›¸ãæ–¹ã¯ä¸€è¦‹ã•ã‚‰ã«ã‚·ãƒ³ãƒ—ãƒ«ã«ãªã£ã¦è‰¯ã•ãã†ã«è¦‹ãˆã¾ã™ãŒã€f1ã€œf4ã®ã“ã‚ã¨ã¯æ„å‘³ãŒå¤‰ã‚ã£ã¦ã—ã¾ã„ã¾ã™ã€‚å®Ÿéš›ã«å®Ÿè¡Œã™ã‚‹ã¨printã‚’é€šã‚‰ãªã„æ§˜ã«ãªã£ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

### ä½•ãŒé•ã†ã®ã‹
f1ã€œf4ã¯å¤‰æ•°xã®TypeãŒnumã‹ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã—ã¦ã„ã‚‹ã®ã«å¯¾ã—ã€f5,f6ã¯å¤‰æ•°xãŒnumã‹ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã—ã¦ã„ã¾ã™ã€‚
ä»¥ä¸‹ã®æ§˜ãªæ„Ÿã˜ã§ã™ã€‚

```dart
void main() {
  const x = 1;
  const x2 = num;
  // printã•ã‚Œã‚‹
  f(x);
  // printã•ã‚Œãªã„
  f(x2);

  // printã•ã‚Œãªã„
  f5(x);
  // printã•ã‚Œã‚‹
  f5(x2);
}
```

## å¯¾ç­–æ–¹æ³•

Dart3ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸ[type_literal_in_constant_pattern]ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨f5, f6ã®æ›¸ãæ–¹ã‚’ã—ãŸéš›ã«è­¦å‘ŠãŒã§ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
æ›´ã«quick fixã§Variable patterns + Wildcard patternsã«ä¿®æ­£ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã“ã®[type_literal_in_constant_pattern]ã§ã™ãŒã€flutter createã—ãŸã¨ãã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨­å®šã•ã‚Œã‚‹[flutter_lints]ã®ãƒ«ãƒ¼ãƒ«ã«ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

### å…·ä½“çš„ãªå¯¾ç­–æ–¹æ³•ï¼‘ï¼šãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹
analysis_options.yamlã«[type_literal_in_constant_pattern]ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§å¯¾ç­–ã§ãã¾ã™
```yaml:analysis_options.yaml
linter:
  rules:
    - type_literal_in_constant_pattern
```

### å…·ä½“çš„ãªå¯¾ç­–æ–¹æ³•ï¼’ï¼šä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†
Flutteræ¨å¥¨ã®[flutter_lints]ä»¥å¤–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã“ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ä¾‹ãˆã°[pedantic_mono](https://pub.dev/packages/pedantic_mono)ã ã¨[type_literal_in_constant_pattern]ãŒã¯ã˜ã‚ã‹ã‚‰æœ‰åŠ¹ã§ã™ã€‚

## å¤‰æ•°xãŒnum Typeã‹ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã—ãŸã„å ´åˆã¯ï¼Ÿ
[type_literal_in_constant_pattern]ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨å¤‰æ•°xãŒnumã‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã—ãŸãã¦f5, f6ã®æ›¸ãæ–¹ã‚’ã—ã¦ã‚‚quick fixã§ä¿®æ­£ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚
ãã®å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¾ã™ã€‚ã“ã†ã™ã‚Œã°è­¦å‘ŠãŒã§ã¾ã›ã‚“ã€‚

```dart
void f7(Object? x) {
  if (x case const (num)) {
    print('int or double');
  }
}

void f8(Object? x) {
  switch (x) {
    case const (num):
      print('int or double');
  }
}
```


# ã¾ã¨ã‚
type_literal_in_constant_patternã®ã™ã™ã‚ã§ã—ãŸğŸ‘


[type_literal_in_constant_pattern]: https://dart.dev/tools/linter-rules/type_literal_in_constant_patter
[flutter_lints]: https://pub.dev/packages/flutter_lints

