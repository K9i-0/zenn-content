---
title: "go_router_builder 3.0.0ã®ç ´å£Šçš„å¤‰æ›´ã«ã¤ã„ã¦"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter", "Dart", "go_router", "go_router_builder"]
published: false
---

# go_router_builder 3.0.0ã®ç ´å£Šçš„å¤‰æ›´ã«ã¤ã„ã¦

## ã¯ã˜ã‚ã«

2025å¹´6æœˆã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸ`go_router_builder 3.0.0`ã«ã¯ã€**ç ´å£Šçš„å¤‰æ›´**ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§`go_router_builder`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ã«å¯¾å¿œãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€å…·ä½“çš„ãªå¤‰æ›´å†…å®¹ã¨ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ–¹æ³•ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

## ç ´å£Šçš„å¤‰æ›´ã®å†…å®¹

### Route classes now required to use a mixin `with _$RouteName`

go_router_builder 3.0.0ã®æœ€ã‚‚é‡è¦ãªå¤‰æ›´ã¯ã€**ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã§mixinã®ä½¿ç”¨ãŒå¿…é ˆ**ã«ãªã£ãŸã“ã¨ã§ã™ã€‚

#### å¤‰æ›´å‰ï¼ˆ2.x.xï¼‰

```dart:routes.dart
@TypedGoRoute<HomeRoute>(path: '/')
class HomeRoute extends GoRouteData {
  const HomeRoute();

  @override
  Widget build(BuildContext context, GoRouterState state) {
    return const HomeScreen();
  }
}
```

#### å¤‰æ›´å¾Œï¼ˆ3.0.0ï¼‰

```dart:routes.dart
@TypedGoRoute<HomeRoute>(path: '/')
class HomeRoute extends GoRouteData with _$HomeRoute {
  const HomeRoute();

  @override
  Widget build(BuildContext context, GoRouterState state) {
    return const HomeScreen();
  }
}
```

## ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †

### 1. pubspec.yamlã®æ›´æ–°

ã¾ãšã€`go_router_builder`ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’3.0.0ã«æ›´æ–°ã—ã¾ã™ï¼š

```yaml:pubspec.yaml
dev_dependencies:
  go_router_builder: ^3.0.0
  build_runner: ^2.0.0
```

### 2. ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã®ä¿®æ­£

æ—¢å­˜ã®å…¨ã¦ã®ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã«é©åˆ‡ãªmixinã‚’è¿½åŠ ã—ã¾ã™ï¼š

```dart:routes.dart
// HomeRoute
@TypedGoRoute<HomeRoute>(path: '/')
class HomeRoute extends GoRouteData with _$HomeRoute {
  // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰
}

// å­ãƒ«ãƒ¼ãƒˆã®ä¾‹
@TypedGoRoute<ProductDetailRoute>(path: '/product/:id')
class ProductDetailRoute extends GoRouteData with _$ProductDetailRoute {
  final String id;
  
  const ProductDetailRoute({required this.id});

  @override
  Widget build(BuildContext context, GoRouterState state) {
    return ProductDetailScreen(productId: id);
  }
}

// ShellRouteã®ä¾‹
class MainShellRoute extends ShellRouteData with _$MainShellRoute {
  const MainShellRoute();

  @override
  Widget builder(BuildContext context, GoRouterState state, Widget navigator) {
    return MainShell(child: navigator);
  }
}
```

### 3. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®å®Ÿè¡Œ

ä¿®æ­£å¾Œã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```bash:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
dart run build_runner build --delete-conflicting-outputs
```

## å®Ÿéš›ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹

### ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ«ãƒ¼ãƒˆ

```dart:routes.dart
// å¤‰æ›´å‰
@TypedGoRoute<LoginRoute>(path: '/login')
class LoginRoute extends GoRouteData {
  final String? redirectPath;
  
  const LoginRoute({this.redirectPath});

  @override
  Widget build(BuildContext context, GoRouterState state) {
    return LoginScreen(redirectPath: redirectPath);
  }
}

// å¤‰æ›´å¾Œ
@TypedGoRoute<LoginRoute>(path: '/login')
class LoginRoute extends GoRouteData with _$LoginRoute {
  final String? redirectPath;
  
  const LoginRoute({this.redirectPath});

  @override
  Widget build(BuildContext context, GoRouterState state) {
    return LoginScreen(redirectPath: redirectPath);
  }
}
```

### è¤‡é›‘ãªãƒ«ãƒ¼ãƒˆï¼ˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆä»˜ãï¼‰

```dart:routes.dart
// å¤‰æ›´å‰
@TypedGoRoute<ProfileRoute>(path: '/profile')
class ProfileRoute extends GoRouteData {
  const ProfileRoute();

  @override
  String? redirect(BuildContext context, GoRouterState state) {
    final authState = AuthProvider.of(context);
    if (!authState.isLoggedIn) {
      return const LoginRoute().location;
    }
    return null;
  }

  @override
  Widget build(BuildContext context, GoRouterState state) {
    return const ProfileScreen();
  }
}

// å¤‰æ›´å¾Œ
@TypedGoRoute<ProfileRoute>(path: '/profile')
class ProfileRoute extends GoRouteData with _$ProfileRoute {
  const ProfileRoute();

  @override
  String? redirect(BuildContext context, GoRouterState state) {
    final authState = AuthProvider.of(context);
    if (!authState.isLoggedIn) {
      return const LoginRoute().location;
    }
    return null;
  }

  @override
  Widget build(BuildContext context, GoRouterState state) {
    return const ProfileScreen();
  }
}
```

## è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«ã§ã®å¯¾å¿œ

### ä¸€æ‹¬ç½®æ›ã®æ´»ç”¨

å¤§è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ã‚¨ãƒ‡ã‚£ã‚¿ã®ä¸€æ‹¬ç½®æ›æ©Ÿèƒ½ã‚’æ´»ç”¨ã§ãã¾ã™ï¼š

**æ¤œç´¢ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼š**
```
class (\w+Route) extends GoRouteData \{
```

**ç½®æ›ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼š**
```
class $1 extends GoRouteData with _$$1 {
```

### VSCodeã®å ´åˆ

1. `Cmd/Ctrl + Shift + H`ã§ç½®æ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ã
2. æ­£è¦è¡¨ç¾ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹ã«ã™ã‚‹ï¼ˆ`.*`ã‚¢ã‚¤ã‚³ãƒ³ï¼‰
3. ä¸Šè¨˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ä¸€æ‹¬ç½®æ›

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ©ãƒ¼

```bash:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
[SEVERE] go_router_builder on lib/routes.dart:
Missing mixin _$HomeRoute on HomeRoute
```

**è§£æ±ºæ–¹æ³•ï¼š**
è©²å½“ã®ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã«`with _$RouteName`ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

#### 2. æ—¢å­˜ã®ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ã¨ã®ç«¶åˆ

```bash:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
[WARNING] Conflicting outputs were detected
```

**è§£æ±ºæ–¹æ³•ï¼š**
```bash:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
dart run build_runner clean
dart run build_runner build
```

#### 3. å‹ã‚¨ãƒ©ãƒ¼

```bash:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
The mixin '_$HomeRoute' can't be mixed in because it's missing...
```

**è§£æ±ºæ–¹æ³•ï¼š**
1. `part`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãŒæ­£ã—ãè¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. ã‚³ãƒ¼ãƒ‰ç”ŸæˆãŒæ­£å¸¸ã«å®Œäº†ã—ã¦ã„ã‚‹ã‹ç¢ºèª

## ç§»è¡Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] `pubspec.yaml`ã§`go_router_builder`ã‚’3.0.0ã«æ›´æ–°
- [ ] å…¨ã¦ã®`GoRouteData`ç¶™æ‰¿ã‚¯ãƒ©ã‚¹ã«é©åˆ‡ãªmixinã‚’è¿½åŠ 
- [ ] å…¨ã¦ã®`ShellRouteData`ç¶™æ‰¿ã‚¯ãƒ©ã‚¹ã«é©åˆ‡ãªmixinã‚’è¿½åŠ 
- [ ] ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’å®Ÿè¡Œï¼ˆ`dart run build_runner build`ï¼‰
- [ ] ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèª
- [ ] ãƒ†ã‚¹ãƒˆãŒæ­£å¸¸ã«é€šã‚‹ã“ã¨ã‚’ç¢ºèª

## ã¾ã¨ã‚

go_router_builder 3.0.0ã§ã¯ã€ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã§ã®mixinä½¿ç”¨ãŒå¿…é ˆã«ãªã‚Šã¾ã—ãŸã€‚å¤‰æ›´è‡ªä½“ã¯å˜ç´”ã§ã™ãŒã€æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯å…¨ã¦ã®ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã®ä¿®æ­£ãŒå¿…è¦ã§ã™ã€‚

**ãƒã‚¤ãƒ³ãƒˆï¼š**
- å…¨ã¦ã®`GoRouteData`ã‚¯ãƒ©ã‚¹ã«`with _$ClassName`ã‚’è¿½åŠ 
- ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®å†å®Ÿè¡ŒãŒå¿…é ˆ
- ä¸€æ‹¬ç½®æ›ã§åŠ¹ç‡çš„ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½

ã“ã®å¤‰æ›´ã«ã‚ˆã‚Šã€å‹å®‰å…¨æ€§ãŒå‘ä¸Šã—ã€ã‚ˆã‚Šç¢ºå®Ÿãªã‚³ãƒ¼ãƒ‰ç”ŸæˆãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚æ—©ã‚ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

### å‚è€ƒãƒªãƒ³ã‚¯

- [go_router_builder 3.0.0 Changelog](https://pub.dev/packages/go_router_builder/changelog)
- [go_routerå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://pub.dev/packages/go_router)
- [Flutterå…¬å¼: Type-safe routing](https://docs.flutter.dev/ui/navigation/go-router)
