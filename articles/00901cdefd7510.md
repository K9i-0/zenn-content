---
title: "go_router_builder 3.0.0ã®ç ´å£Šçš„å¤‰æ›´ã«ã¤ã„ã¦"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter", "Dart", "go_router", "go_router_builder"]
published: false
---

# go_router_builder 3.0.0ã®ç ´å£Šçš„å¤‰æ›´ã«ã¤ã„ã¦

go_router_builderãŒ3.0.0ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã€ç ´å£Šçš„å¤‰æ›´ãŒå…¥ã‚Šã¾ã—ãŸã€‚
**å…¨ã¦ã®ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã«`with _$RouteName`ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚**

## ä½•ãŒå¤‰ã‚ã£ãŸã‹

### å¤‰æ›´å‰ï¼ˆ2.x.xï¼‰
```dart
class HomeRoute extends GoRouteData {
  // ...
}
```

### å¤‰æ›´å¾Œï¼ˆ3.0.0ï¼‰
```dart
class HomeRoute extends GoRouteData with _$HomeRoute {
  // ...
}
```

## ãªãœå¤‰æ›´ã•ã‚ŒãŸã‹

2.x.xã§ã¯extensionã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã—ãŸãŒã€ã“ã‚Œã ã¨æŠ½è±¡çš„ãªå‹ï¼ˆ`GoRouteData`ï¼‰ã§æ“ä½œã§ãã¾ã›ã‚“ã§ã—ãŸã€‚

```dart
// 2.x.xã§ã¯ä¸å¯èƒ½
GoRouteData route = const HomeRoute();
route.go(context); // âŒ Error
```

3.0.0ã®mixinæ–¹å¼ãªã‚‰å¯èƒ½ã«ãªã‚Šã¾ã™ï¼š

```dart
// 3.0.0ã§ã¯å¯èƒ½
GoRouteData route = const HomeRoute();
route.go(context); // âœ… OK
```

## ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †

### 1. pubspec.yamlã‚’æ›´æ–°

```yaml:pubspec.yaml
dependencies:
  go_router: ^15.1.3

dev_dependencies:
  go_router_builder: ^3.0.0
  build_runner: ^2.0.0
```

### 2. å…¨ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã«mixinã‚’è¿½åŠ 

**ã‚„ã‚‹ã“ã¨ã¯å˜ç´”ã§ã€å…¨ã¦ã®GoRouteDataã‚¯ãƒ©ã‚¹ã«`with _$ClassName`ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã™ã€‚**

```dart
// ã©ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚‚åŒã˜å¤‰æ›´
class ProductRoute extends GoRouteData with _$ProductRoute { // â† ã“ã‚Œã‚’è¿½åŠ 
  final String id;
  const ProductRoute(this.id);
  
  @override
  Widget build(BuildContext context, GoRouterState state) {
    return ProductScreen(id: id);
  }
}
```

### 3. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’å®Ÿè¡Œ

```bash:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
dart run build_runner build --delete-conflicting-outputs
```

## åŠ¹ç‡çš„ã«ã‚„ã‚‹æ–¹æ³•

### VSCodeã§ä¸€æ‹¬ç½®æ›

**æ¤œç´¢ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼š**
```
class (\w+Route) extends GoRouteData \{
```

**ç½®æ›ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼š**
```
class $1 extends GoRouteData with _$$1 {
```

1. `Cmd/Ctrl + Shift + H`ã§ç½®æ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ã
2. æ­£è¦è¡¨ç¾ãƒ¢ãƒ¼ãƒ‰ï¼ˆ`.*`ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ã‚’æœ‰åŠ¹ã«ã™ã‚‹
3. ä¸Šè¨˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ä¸€æ‹¬ç½®æ›

## ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼

### ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ©ãƒ¼
```
Missing mixin _$HomeRoute on HomeRoute
```
â†’ `with _$RouteName`ã‚’è¿½åŠ ã—å¿˜ã‚Œ

### ç«¶åˆã‚¨ãƒ©ãƒ¼
```
Conflicting outputs were detected
```
â†’ ä»¥ä¸‹ã§è§£æ±ºï¼š
```bash
dart run build_runner clean
dart run build_runner build
```

## ãƒ¡ãƒªãƒƒãƒˆ

- æŠ½è±¡çš„ãªå‹ã§ã®æ“ä½œãŒå¯èƒ½
- å‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒç°¡å˜
- å…±é€šã®extensionãŒä½œæˆå¯èƒ½

```dart
extension GoRouteDataExtension on GoRouteData {
  void goWithAnalytics(BuildContext context) {
    Analytics.track('navigation', {'route': location});
    go(context); // âœ… mixinã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹
  }
}
```

## ã¾ã¨ã‚

- **å¤‰æ›´å†…å®¹**: å…¨ãƒ«ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã«`with _$RouteName`ã‚’è¿½åŠ 
- **ç†ç”±**: æŠ½è±¡çš„ãªå‹ã§ã®æ“ä½œã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚
- **ä½œæ¥­**: ä¸€æ‹¬ç½®æ›ã§åŠ¹ç‡çš„ã«å¯¾å¿œå¯èƒ½

æ—©ã‚ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ãŠãã®ãŒãŠã™ã™ã‚ã§ã™ğŸ‘

### å‚è€ƒãƒªãƒ³ã‚¯

- [Issue #106790](https://github.com/flutter/flutter/issues/106790) - å¤‰æ›´ã®èƒŒæ™¯
- [PR #9275](https://github.com/flutter/packages/pull/9275) - å®Ÿè£…
- [å…¬å¼Example](https://pub.dev/packages/go_router_builder/example)
