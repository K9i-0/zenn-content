---
title: "Flutter 3.7ç³»ã«ã‚¢ãƒ—ãƒ‡ã™ã‚‹ã¨ãfirebase_dynamic_linksã‚’ä½¿ã£ã¦ã„ã‚‹äººã¯æ³¨æ„"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["flutter", "android"]
published: false
---
## ã¯ã˜ã‚ã«
Flutter 3.7ç³»ã«ã‚¢ãƒ—ãƒ‡ã—ãŸã¨ãDynamic Linkså‘¨ã‚Šã§ã¡ã‚‡ã£ã¨ãƒãƒã£ãŸã®ã§å…±æœ‰ã§ã™ã€‚

## targetSdkVersion
Flutterã§Androidã‚¢ãƒ—ãƒªã‚’ä½œã‚‹ã¨ãã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã ã¨ã€build.gradleã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
```gradle:android/app/build.gradle
android {
    compileSdkVersion flutter.compileSdkVersion
    ndkVersion flutter.ndkVersion

    ~~~è‰²ã€…ç•¥
        minSdkVersion flutter.minSdkVersion
        targetSdkVersion flutter.targetSdkVersion
```
ã“ã®flutter.targetSdkVersionãªã©ã¯Flutter SDKã®flutter.gradleã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
ä»¥ä¸‹ã¯3.7ç³»ã®ã‚‚ã®ã§ã™ã€‚
```gradle:packages/flutter_tools/gradle/flutter.gradle
/** For apps only. Provides the flutter extension used in app/build.gradle. */
class FlutterExtension {
    /** Sets the compileSdkVersion used by default in Flutter app projects. */
    static int compileSdkVersion = 33

    /** Sets the minSdkVersion used by default in Flutter app projects. */
    static int minSdkVersion = 16

    /** Sets the targetSdkVersion used by default in Flutter app projects. */
    static int targetSdkVersion = 33

    /**
     * Sets the ndkVersion used by default in Flutter app projects.
     * Chosen as default version of the AGP version below as found in
     * https://developer.android.com/studio/projects/install-ndk#default-ndk-per-agp
     */
    static String ndkVersion = "23.1.7779620"

    /**
     * Specifies the relative directory to the Flutter project directory.
     * In an app project, this is ../.. since the app's build.gradle is under android/app.
     */
    String source

    /** Allows to override the target file. Otherwise, the target is lib/main.dart. */
    String target
}
```
ã“ã¡ã‚‰ã¯3.3ç³»ã§ã™ã€‚
```gradle:packages/flutter_tools/gradle/flutter.gradle
/** For apps only. Provides the flutter extension used in app/build.gradle. */
class FlutterExtension {
    /** Sets the compileSdkVersion used by default in Flutter app projects. */
    static int compileSdkVersion = 31

    /** Sets the minSdkVersion used by default in Flutter app projects. */
    static int minSdkVersion = 16

    /** Sets the targetSdkVersion used by default in Flutter app projects. */
    static int targetSdkVersion = 31

    /**
     * Sets the ndkVersion used by default in Flutter app projects.
     * Chosen as default version of the AGP version below.
     */
    static String ndkVersion = "21.1.6352462"

    /**
     * Specifies the relative directory to the Flutter project directory.
     * In an app project, this is ../.. since the app's build.gradle is under android/app.
     */
    String source

    /** Allows to override the target file. Otherwise, the target is lib/main.dart. */
    String target
}
```

æ¯”è¼ƒã™ã‚‹ã¨compileSdkVersionã€targetSdkVersionãŒ31ã‹ã‚‰33ã«ä¸ŠãŒã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

## Dynamic Linksã§ã®å•é¡Œ
è‡ªåˆ†ã®å ´åˆtargetSdkVersion 33ã«å¤‰ã‚ã£ãŸã“ã¨ã§ã€Android 13ã®ç«¯æœ«ã§Dynamic LinksãŒé–‹ã‘ãªã„å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
ä»¥ä¸‹ã®è¨˜äº‹ã‚’åŒã˜ç¾è±¡ãŒç™ºç”Ÿã—ã¦ã„ã‚‹æ–¹ãŒã„ãŸã®ã§ã€åŒæ§˜ã®å¯¾å‡¦ã—ãŸã¨ã“ã‚è§£æ±ºã—ã¾ã—ãŸã€‚

https://qiita.com/koichi-ozaki/items/883427922399788632a7

### å¯¾å‡¦æ–¹æ³•
å…ˆç¨‹ã®è¨˜äº‹ã¾ã‚“ã¾ã®èª¬æ˜ã§ã™ã€‚
`https://hoge.page.link/?link=https://fuga.jp/&ius=xxx&apn=...`ã®ã‚ˆã†ãªãƒªãƒ³ã‚¯ãŒã‚ã£ãŸå ´åˆã€`https://fuga.jp/&ius=xxx&apn=...`ã®éƒ¨åˆ†ãŒãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ãªã®ã§ã™ãŒã€ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã®ãƒ›ã‚¹ãƒˆã‚’intent-filterã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚
```xml:android/app/src/main/AndroidManifest.xml
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
    
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data
                    android:host="hoge.page.link"
                    android:scheme="https" />
+               <data
+                   android:host="fuga.jp"
+                   android:scheme="https" />
            </intent-filter>
```

## ã¾ã¨ã‚
Flutterã®ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚ã’ã‚‹ã¨targetSdkVersionã‚‚è‡ªå‹•ã§ã‚ãŒã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚