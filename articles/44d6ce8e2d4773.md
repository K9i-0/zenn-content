---
title: "Flutter 3.7ç³»ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§firebase_dynamic_linksã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã®æ³¨æ„ç‚¹"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["flutter", "android"]
published: true
---
## ã¯ã˜ã‚ã«

Flutter 3.7ç³»ã¸ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸéš›ã€Dynamic Linkså‘¨ã‚Šã§å°‘ã—å•é¡ŒãŒç™ºç”Ÿã—ãŸã®ã§ã€ãã®è§£æ±ºæ–¹æ³•ã‚’å…±æœ‰ã—ã¾ã™ã€‚

## targetSdkVersion

Flutterã§Androidã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã§ã¯build.gradleã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

```gradle:android/app/build.gradle
android {
    compileSdkVersion flutter.compileSdkVersion
    ndkVersion flutter.ndkVersion

    ~~~çœç•¥
        minSdkVersion flutter.minSdkVersion
        targetSdkVersion flutter.targetSdkVersion
```text

ã“ã®flutter.targetSdkVersionãªã©ã¯ã€Flutter SDKã®flutter.gradleã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
ä»¥ä¸‹ã¯3.7ç³»ã®ã‚‚ã®ã§ã™ã€‚

```gradle:packages/flutter_tools/gradle/flutter.gradle
/** For apps only. Provides the flutter extension used in app/build.gradle. */
class FlutterExtension {
    /** Sets the compileSdkVersion used by default in Flutter app projects. */
    static int compileSdkVersion = 33

    /** Sets the minSdkVersion used by default in Flutter app projects. */
    static int minSdkVersion = 16

    /** Sets the targetSdkVersion used by default in Flutter app projects. */
    static int targetSdkVersion = 33

    ~~~çœç•¥
}
```text

ã“ã¡ã‚‰ã¯3.3ç³»ã§ã™ã€‚

```gradle:packages/flutter_tools/gradle/flutter.gradle
/** For apps only. Provides the flutter extension used in app/build.gradle. */
class FlutterExtension {
    /** Sets the compileSdkVersion used by default in Flutter app projects. */
    static int compileSdkVersion = 31

    /** Sets the minSdkVersion used by default in Flutter app projects. */
    static int minSdkVersion = 16

    /** Sets the targetSdkVersion used by default in Flutter app projects. */
    static int targetSdkVersion = 31

    ~~~çœç•¥
}
```text

æ¯”è¼ƒã™ã‚‹ã¨ã€compileSdkVersionã¨targetSdkVersionãŒ31ã‹ã‚‰33ã«ä¸ŠãŒã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

## Dynamic Linksã§ã®å•é¡Œ

ç§ã®å ´åˆã€targetSdkVersionãŒ33ã«å¤‰ã‚ã£ãŸã“ã¨ã§ã€Android 13ã®ç«¯æœ«ã§Dynamic LinksãŒé–‹ã‘ãªã„å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã®è¨˜äº‹ã§åŒã˜ç¾è±¡ãŒç™ºç”Ÿã—ã¦ã„ã‚‹æ–¹ãŒã„ãŸã®ã§ã€åŒæ§˜ã®å¯¾å‡¦ã‚’è¡Œã„è§£æ±ºã—ã¾ã—ãŸã€‚

<https://qiita.com/koichi-ozaki/items/883427922399788632a7>

### å¯¾å‡¦æ–¹æ³•

ä¸Šè¨˜ã®è¨˜äº‹ã®èª¬æ˜é€šã‚Šã§ã™ã€‚

`https://hoge.page.link/?link=https://fuga.jp/&ius=xxx&apn=...`ã®ã‚ˆã†ãªãƒªãƒ³ã‚¯ãŒã‚ã£ãŸå ´åˆã€`https://fuga.jp/&ius=xxx&apn=...`ã®éƒ¨åˆ†ãŒãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã§ã™ãŒã€ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã®ãƒ›ã‚¹ãƒˆã‚’intent-filterã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

```diff xml:android/app/src/main/AndroidManifest.xml
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
    
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data
                    android:host="hoge.page.link"
                    android:scheme="https" />
+               <data
+                   android:host="fuga.jp"
+                   android:scheme="https" />
            </intent-filter>
```

## ã¾ã¨ã‚

Flutterã®ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã‚‹ã¨ã€targetSdkVersionã‚‚è‡ªå‹•ã§ä¸ŠãŒã‚‹ãŸã‚æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ç‰¹ã«firebase_dynamic_linksã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã®ãƒ›ã‚¹ãƒˆã‚’intent-filterã«è¿½åŠ ã™ã‚‹ã“ã¨ã§å•é¡ŒãŒè§£æ±ºã§ãã¾ã™ã€‚ã“ã®è¨˜äº‹ãŒåŒæ§˜ã®å•é¡Œã«ç›´é¢ã—ãŸæ–¹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚
