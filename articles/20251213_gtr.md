---
title: "CodeRabbitã®git-worktree-runnerãŒãƒãƒ¼ãƒ ã§ã‚‚ä½¿ã„ã‚„ã™ããªã£ãŸã®ã§ç´¹ä»‹"
emoji: "ğŸ™"
type: "tech"
topics: ["Claudecode", "gitworktree", "ai"]
publication_name: yumemi_inc
published: false
---

Claude Codeã‚„Codex CLIãªã©ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä¸¦åˆ—å®Ÿè¡Œã™ã‚‹ä¸Šã§git worktreeï¼ˆä»¥ä¸‹worktreeï¼‰ãŒæ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚
ãŸã worktreeã¯ã‚³ãƒãƒ³ãƒ‰ãŒã‚„ã‚„ã“ã—ãã¦ã®ã§ã€è£œåŠ©ãƒ„ãƒ¼ãƒ«ãŒæ¬²ã—ããªã‚Šã¾ã™ğŸ˜­

ãã“ã§ãŠã™ã™ã‚ã—ãŸã„ã®ãŒCodeRabbitãŒé–‹ç™ºã—ã¦ã„ã‚‹[git-worktree-runner](https://github.com/coderabbitai/git-worktree-runner)ã¨ã„ã†cliãƒ„ãƒ¼ãƒ«ã§ã™!ï¼ˆå…¬å¼ã®ç•¥ç§°ãŒgtrãªã®ã§ã€ä»Šå¾Œã¯gtrã¨è¡¨è¨˜ã—ã¾ã™ã€‚ï¼‰
gtrã®æä¾›ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯ä¾¿åˆ©ã ã£ãŸã®ã§ã™ãŒã€ã“ã‚Œã¾ã§è¨­å®šå‘¨ã‚Šã ã‘ãŒå¾®å¦™ã§ã—ãŸãŒæœ€è¿‘ã®ã‚¢ãƒ—ãƒ‡ã§.gtrconfigã¨ã„ã†è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾å¿œã—ãƒãƒ¼ãƒ ã§ã®æ´»ç”¨ãªã©ã‚‚ã‚„ã‚Šã‚„ã™ããªã‚Šã¾ã—ãŸğŸ¥³


ã“ã®è¨˜äº‹ã§ã¯gtrã®ç°¡å˜ãªä½¿ã„æ–¹ã¨ã€æœ€è¿‘è¿½åŠ ã•ã‚ŒãŸ.gtrconfigã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚

## gtrã®ä½¿ã„æ–¹
.gtrconfigã®ç´¹ä»‹ãŒãƒ¡ã‚¤ãƒ³ã®è¨˜äº‹ãªã®ã§é‡è¦ãªã¨ã“ã‚ã ã‘ç´¹ä»‹ã—ã¾ã™ã€‚è©³ç´°ã¯å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã‚„åˆ¥ã®ç´¹ä»‹è¨˜äº‹ã‚’ã”è¦§ãã ã•ã„ã€‚

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã„ãã¤ã‹ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ãŒQuick Startã®ã‚‚ã®ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’è²¼ã‚‹æ–¹å¼ã§ã™ã€‚
ã“ã‚Œã§git gtrã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
```bash
git clone https://github.com/coderabbitai/git-worktree-runner.git
cd git-worktree-runner
sudo ln -s "$(pwd)/bin/git-gtr" /usr/local/bin/git-gtr
```

ã¡ã‚‡ã£ã¨é•·ã„ã®ã§aliasã‚’è¨­å®šã™ã‚‹ã®ãŒè‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚
å…ƒã€…ã¯gtrã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰åã ã£ãŸã®ã§ã™ãŒã€brewã®ã‚³ãƒãƒ³ãƒ‰ã¨è¢«ã‚‹ã“ã¨ãŒå¤šãå¤‰ã‚ã‚Šã¾ã—ãŸã€‚
```text
# ~/.zshrc ãªã©ã«è¿½åŠ 
alias gwr = 'git gtr'
```

### ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®å ´åˆã¯
git pullã—ãŸã‚‰OKã§ã™
```bash
cd git-worktree-runner
git pull
```

### æ—¥å¸¸çš„ã«ä½¿ã†ã‚³ãƒãƒ³ãƒ‰

ã ã„ãŸã„ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ä½¿ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
newã€editorã€aiã§worktreeã‚’ä½œã£ã¦AIãƒ„ãƒ¼ãƒ«ã§é–‹ã
listã¨rmã§ä½œæˆæ¸ˆã¿ã®worktreeã‚’ç®¡ç†ã¨ã„ã£ãŸæ„Ÿã˜ã§ã™ã­

```bash
# my-featureã¨ã„ã†åå‰ã§ãƒ–ãƒ©ãƒ³ãƒã¨worktreeã‚’ä½œã‚‹ã€‚ã™ã§ã«ãƒ–ãƒ©ãƒ³ãƒãŒã‚ã‚Œã°worktreeã ã‘ä½œã‚‹
git gtr new my-feature
# ç¾åœ¨ã®checkoutã—ã¦ã‚‹ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰newã—ãŸã„å ´åˆ
git gtr new my-feature --from-current
# è¨­å®šã—ãŸã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆCursorãªã©ï¼‰ã§worktreeã‚’é–‹ã
git gtr editor my-feature
# è¨­å®šã—ãŸCLIãƒ„ãƒ¼ãƒ«ï¼ˆClaude Codeãªã©ï¼‰ã§worktreeã‚’é–‹ã
git gtr ai my-feature

# worktreeã®ä¸€è¦§ã‚’ç¢ºèª
git gtr list
# worktreeã‚’å‰Šé™¤
git gtr rm my-feature
```

```bash:gwrã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚ã‚‹å ´åˆ
# my-featureã¨ã„ã†åå‰ã§ãƒ–ãƒ©ãƒ³ãƒã¨worktreeã‚’ä½œã‚‹ã€‚ã™ã§ã«ãƒ–ãƒ©ãƒ³ãƒãŒã‚ã‚Œã°worktreeã ã‘ä½œã‚‹
gwr new my-feature
# ç¾åœ¨ã®checkoutã—ã¦ã‚‹ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰newã—ãŸã„å ´åˆ
gwr new my-feature --from-current
# è¨­å®šã—ãŸã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆCursorãªã©ï¼‰ã§worktreeã‚’é–‹ã
gwr editor my-feature
# è¨­å®šã—ãŸCLIãƒ„ãƒ¼ãƒ«ï¼ˆClaude Codeãªã©ï¼‰ã§worktreeã‚’é–‹ã
gwr ai my-feature

# worktreeã®ä¸€è¦§ã‚’ç¢ºèª
gwr list
# worktreeã‚’å‰Šé™¤
gwr rm my-feature
```

listè¡¨ç¤ºã™ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ãŒã€ã„ã„æ„Ÿã˜ã«worktreeç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«çºã¾ã‚Šã¾ã™ã€‚
```
â¯ gwr list
Git Worktrees

BRANCH                         PATH
------                         ----
main [main repo]               /Users/kotahayashi/Workspace/zenn-content
(detached)                     /Users/kotahayashi/Workspace/zenn-content-worktrees
my-feature                     /Users/kotahayashi/Workspace/zenn-content-worktrees/my-feature
test                           /Users/kotahayashi/Workspace/zenn-content-worktrees/test


Tip: Use 'git gtr list --porcelain' for machine-readable output
```

## .gtrconfigã®ç´¹ä»‹
æœ¬ç·¨ã§ã™ã€‚
worktreeã‚’ä½œã‚‹éš›ã«ã¯æ™®æ®µgitignoreã—ã¦ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã‚Šã€ä½œæˆå¾Œã«ç‰¹å®šã®ä¾å­˜è§£æ±ºã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã„ã§ã™ã€‚

### ã“ã‚Œã¾ã§
gtrã¯copyã‚„hooksã®è¨­å®šæ©Ÿèƒ½ã§ã“ã‚Œã‚‰ã‚’å®Ÿç¾ã™ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã¾ã§ã¯æ¯å›è¨­å®šã‚³ãƒãƒ³ãƒ‰ã‚’å©ãå¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

```bash
# ã‚³ãƒ”ãƒ¼ç³»
git gtr config add gtr.copy.include "**/.env.example"
git gtr config add gtr.copy.include "**/CLAUDE.md"
git gtr config add gtr.copy.include "*.config.js"

# hook
git gtr config add gtr.hook.postCreate "npm install"
```

ã‚³ãƒ”ãƒ¼ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã«ä½•åº¦ã‚‚ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã®ã¯é¢å€’ã§ã€ãƒãƒ¼ãƒ ã§è¨­å®šã‚’å…±æœ‰ã—ãŸã„å ´åˆã‚‚ä¸éƒ½åˆã§ã—ãŸã€‚

### .gtrconfig

ã‚¢ãƒ—ãƒ‡ã§gtrç”¨ã®è¨­å®šã‚’å®£è¨€çš„ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ãƒªãƒã‚¸ãƒˆãƒªã«ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã™ã‚Œã°ã€ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã‚‚ç°¡å˜ã«gtrã‚’ä½¿ã„å§‹ã‚ã‚‰ã‚Œã¾ã™ã­ï¼
ä½•ãŒè¨­å®šã•ã‚Œã¦ã‚‹ã‹ã‚‚åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚
defaultsã®éƒ¨åˆ†ã¯å¥½ã¿ãŒåˆ†ã‹ã‚Œã‚‹ã®ã§.gtrconfigã«ã¯æ›¸ã‹ãªã„ã€ã‚‚ã—ãã¯.gtrconfig.exmpleã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’gitç®¡ç†ã™ã‚‹ã®ãŒè‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚

```toml:.gtrconfig
# .gtrconfig - commit this file to share settings with your team

[copy]
    include = **/.env.example
    include = *.md
    exclude = **/.env

[copy]
    includeDirs = node_modules
    excludeDirs = node_modules/.cache

[hooks]
    postCreate = npm install
    postCreate = cp .env.example .env

[defaults]
    editor = cursor
    ai = claude
```

### .gtrconfigã®è¨­å®šTips
ãŠãã‚‰ãã¿ãªã•ã‚“AIãƒ„ãƒ¼ãƒ«ã§.gtrconfigã‚’ä½œæˆã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚
copyéƒ¨åˆ†ã¯ä»¥ä¸‹ã®æ–¹æ³•ãŒæ¥½ã ã£ãŸã®ã§ç´¹ä»‹ã§ã™ã€‚

1. gtrã§2ã¤worktreeã‚’ä½œã‚‹
2. ç‰‡æ–¹ã ã‘ãƒ“ãƒ«ãƒ‰ã‚’æ¸ˆã¾ã›ã‚‹
3. /add-dirãªã©ã§worktreeã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ä¼ãˆã‚‹
4. å·®åˆ†ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã©ã‚’åˆ¤æ–­ã•ã›ãã‚Œã‚‚ã‚³ãƒ”ãƒ¼å¯¾è±¡ã«ã™ã‚‹

## ã¾ã¨ã‚
.gtrconfigã®ç™»å ´ã§ãƒãƒ¼ãƒ å…¨ä½“ã§worktreeã‚’æ´»ç”¨ã—ã‚„ã™ããªã‚‹ã¨æ€ã„ã¾ã™

ã¡ãªã¿ã«.gtrconfigã‚„--from-currentã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯è‡ªåˆ†ãŒIssueã§ææ¡ˆã—ãŸã®ã§ã™ãŒã€ã‹ãªã‚Šæ—©ãå¯¾å¿œã—ã¦ã‚‚ã‚‰ãˆãŸã®ã§è¦æœ›ã‚ã£ãŸã‚‰FBã™ã‚‹ã¨è‰¯ã•ãã†ã§ã™ï¼

https://github.com/coderabbitai/git-worktree-runner/issues?q=is%3Aissue%20state%3Aclosed%20author%3AK9i-0
