---
title: "riverpod_generatorã§ç”Ÿæˆã§ãã‚‹Providerã®ç¨®é¡ã¨æ›¸ãæ–¹ï¼ˆ1.2.0æ™‚ç‚¹ï¼‰"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["flutter", "riverpod", "riverpodgenerator"]
published: true
---

## ã¯ã˜ã‚ã«
[riverpod_generator](https://pub.dev/packages/riverpod_generator)ã¯Riverpodã®Providerã‚’ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã§ãã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚
æœ€è¿‘å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§riverpod_generatorã‚’ä½¿ã£ãŸã¨ã“ã‚ã€ã„ã¤ã‚‚ã®ã‚ã‚Œã©ã†ã‚„ã£ã¦æ›¸ãã‚“ã ã£ã‘ï¼Ÿã¨ãªã£ãŸã®ã§ã€ç”Ÿæˆã§ãã‚‹Providerã®ç¨®é¡ã¨æ›¸ãæ–¹ã‚’è¨˜äº‹ã«ã—ã¦ã¿ã¾ã—ãŸã€‚

ã“ã®è¨˜äº‹ã¯Riverpodã¯ä½¿ã£ãŸã“ã¨ã‚ã‚‹ã‘ã©ã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã¯ã“ã‚Œã‹ã‚‰ã¨ã„ã†äººã«ãŠã™ã™ã‚ã§ã™ã€‚
:::message
å†…å®¹ã¯è¨˜äº‹åŸ·ç­†æ™‚ç‚¹(riverpod_generator 1.2.0)ã®ã‚‚ã®ã§ã™ã€‚
ã“ã®è¨˜äº‹ã§ã¯Providerã®ä½¿ã„åˆ†ã‘ã«ã¯ã‚ã¾ã‚Šè§¦ã‚Œã¾ã›ã‚“ã€‚
:::

## ç”Ÿæˆã§ãã‚‹Provider
[ã“ã®Issue](https://github.com/rrousselGit/riverpod/issues/1663)ã«ã‚ˆã‚‹ã¨riverpod_generatorã§ã¯ï¼”ç¨®é¡ã®Providerã®ç”Ÿæˆã«å¯¾å¿œã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ ğŸ‘€
![](/images/SCR-20230227-pwz.png)

- plain objects
Provider
- futures
FutureProvider
- class variants of the above two
NotifierProviderã¨AsyncNotifierProvider

ã®ï¼”ã¤ã§ã™

SteamProviderã‚„StateNotifierProvider/ChangeNotifierProviderã¯ç¾åœ¨ã‚µãƒãƒ¼ãƒˆã—ã¦ãªã„ã‚ˆã†ã§ã™ã€‚

---
å„Providerã®æ›¸ãæ–¹ã§ã™ã€‚

### Provider
é–¢æ•°ã«Riverpodã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹ã¨Providerã«ãªã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¨Provider<String>ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ï¼ˆæ­£ç¢ºã«ã¯AutoDisposeProvider<String>ï¼‰
```dart
// hogeProviderã‚’ä½œã‚‹å ´åˆ
@riverpod
String hoge(HogeRef ref) {
  return "hoge";
}

// ã‚¢ãƒ­ãƒ¼æ¼”ç®—å­ã‚’ä½¿ã£ãŸæ›¸ãæ–¹
@riverpod
String hoge(HogeRef ref) => "hoge";
```

### FutureProvider
Providerã¨åŒæ§˜é–¢æ•°ã«Riverpodã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã¾ã™ãŒã€è¿”ã‚Šå€¤ãŒFutureã ã¨FutureProviderã«ãªã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¨FutureProvider<String>ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ï¼ˆæ­£ç¢ºã«ã¯AutoDisposeFutureProvider<String>ï¼‰
```dart
// hogeProviderã‚’ä½œã‚‹å ´åˆ
@riverpod
Future<String> hoge(HogeRef ref) async {
  return "hoge";
}

// ã‚¢ãƒ­ãƒ¼æ¼”ç®—å­ã‚’ä½¿ã£ãŸæ›¸ãæ–¹
@riverpod
Future<String> hoge(HogeRef ref) async => "hoge";
```

### NotifierProvider
å¾“æ¥StateNotifierProviderã‚’ä½¿ã£ã¦ã„ãŸã‚±ãƒ¼ã‚¹ã§ã¯ã€NotifierProviderã‹AsyncNotifierProviderã‚’ä½¿ã„ã¾ã™ã€‚çŠ¶æ…‹ã‚’éåŒæœŸã«åˆæœŸåŒ–ã—ãŸã„ã¨ãã¯AsyncNotiferProviderã€ãã‚Œä»¥å¤–ã¯NotifierProviderã§ã™ã€‚

å…ˆç¨‹ã¾ã§ã‚ˆã‚Šå°‘ã—è¤‡é›‘ã§ã™ã€‚
1. _${ã‚¯ãƒ©ã‚¹å}ã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‹
2. Riverpodã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹
3. buildãƒ¡ã‚½ãƒƒãƒ‰ã‚’overrideã™ã‚‹

ä»¥ä¸Šã§NotifierProviderã«ãªã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¨NotifierProvider<Hoge, HogeState>ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ï¼ˆæ­£ç¢ºã«ã¯AutoDisposeNotifierProvider<Hoge, HogeState>ï¼‰
```dart
class HogeState {
  const HogeState();
}

// hogeProviderã‚’ä½œã‚‹å ´åˆ
@riverpod
class Hoge extends _$Hoge {
  @override
  HogeState build() {
    return const HogeState();
  }

  void huga() {}
}
```

### AsyncNotifierProvider
NotiferProviderã¨åŸºæœ¬ã¯åŒã˜ã§ã™ãŒã€buildãƒ¡ã‚½ãƒƒãƒ‰ã®è¿”ã‚Šå€¤ã‚’Futureã«ã—ãŸã¨ãã¯AsyncNotifierProviderã«ãªã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¨AsyncNotifierProvider<Hoge, HogeState>ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ï¼ˆæ­£ç¢ºã«ã¯AutoDisposeAsyncNotifierProvider<Hoge, HogeState>ï¼‰
```dart
class HogeState {
  const HogeState();
}

// hogeProviderã‚’ä½œã‚‹å ´åˆ
@riverpod
class Hoge extends _$Hoge {
  @override
  Future<HogeState> build() async {
    return const HogeState();
  }

  void huga() {}
}
```
:::message
AsyncNotiferProviderã‚’ä½œã‚‹ã¨ãã¯å¿…ãšbuildãƒ¡ã‚½ãƒƒãƒ‰å†…ã§åˆæœŸåŒ–å‡¦ç†ã‚’è¡Œã„ã¾ã—ã‚‡ã†ã€‚ãã†ã™ã‚‹ã“ã¨ã§FutureProviderã¨åŒã˜æ„Ÿè¦šã§ref.invalidateãªã©ãŒä½¿ãˆã¾ã™ã€‚
:::

---

## Familyã¨AutoDispose
å¾“æ¥ã®Modifiers(.family, .autoDispose)ã®æ›¸ãæ–¹ãŒriverpod_generatorã§ã¯å¤§ããå¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚


### Family
Providerã«å¤–éƒ¨ã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æ¸¡ã›ã‚‹Familyã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã§ã¯è‡ªç”±åº¦ãŒã‚ãŒã£ã¦ã„ã¾ã™ã€‚

é–¢æ•°ã‚’ä½¿ã†ï¼ˆProviderã€FutureProviderï¼‰å ´åˆã€é–¢æ•°ã®å¼•æ•°ã‚’è¨­å®šã™ã‚Œã°Familyã«ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«å¼•æ•°ã®è‡ªç”±åº¦ãŒé«˜ã„ã§ã™ã€‚
```dart
@riverpod
String hoge(HogeRef ref, String fuga) {
  return "hoge";
}

@riverpod
String hoge2(Hoge2Ref ref, {String? fuga}) {
  return "hoge";
}

@riverpod
String hoge3(Hoge3Ref ref, {required String fuga}) {
  return "hoge";
}

@riverpod
String hoge4(Hoge4Ref ref, {String fuga = 'huga'}) {
  return "hoge";
}

@riverpod
String hoge5(Hoge5Ref ref, {String fuga = 'huga', String? piyo}) {
  return "hoge";
}
```

ã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†ï¼ˆNotifierProviderã€AsyncNotifierProviderï¼‰å ´åˆã€buildãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã‚’è¨­å®šã™ã‚Œã°Familyã«ãªã‚Šã¾ã™ã€‚
```dart
@riverpod
class Hoge extends _$Hoge {
  @override
  HogeState build(String piyo) {
    return const HogeState();
  }

  void huga() {}
}
```

### AutoDispose
ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’ä½¿ã†å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§AutoDisposeãªProviderãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚å‰åŠã§æ­£ç¢ºã«ã¯AutoDisposeã€‡ã€‡ã¨æ›¸ã„ã¦ã„ãŸã®ã¯ã“ã®ãŸã‚ã§ã™ã€‚

AutoDisposeã§ãªã„Providerã‚’ä½œã‚‹å ´åˆã¯ã€@Riverpod(keepAlive: true)ã¨ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¤‰æ›´ã—ã¾ã™ã€‚
```dart
@Riverpod(keepAlive: true)
String hoge(HogeRef ref) {
  return "hoge";
}
```


## ã¾ã¨ã‚
ã–ã£ãã‚Šã§ã™ãŒã€riverpod_generatorã§ç”Ÿæˆã§ãã‚‹Providerã®ç¨®é¡ã¨æ›¸ãæ–¹ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã—ãŸã€‚
ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã“ã‚Œã‹ã‚‰ä½¿ãŠã†ã¨ã„ã†ã¨ãã«å‚è€ƒã«ãªã£ãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚