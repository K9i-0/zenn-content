---
title: "riverpod_generatorの初歩的な説明"
emoji: "👾"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["flutter", "riverpod", "riverpodgenerator"]
published: false
---
## はじめに
riverpod_generatorを知っていますか？
riverpod_generatorはコード生成でプロバイダーを定義するriverpodのサイドパッケージです。公式でもコード生成に抵抗がなければ、riverpod_generatorを使うことを推奨しています。
この記事はriverpod_generatorのメリットを説明して、その雰囲気を知ってもらうためのものです。

https://pub.dev/packages/riverpod_generator

## riverpod_generatorを使うメリット
riverpod_generatorを使ういくつかのメリットがあります。

:::message
この記事では、今後riverpod_generatorを使ったプロバイダーをGeneratedProvider、これまでのプロバイダーをManualProviderと呼びます（lint名などでこう書かれています）。
:::

### シンプルな構文
GeneratedProviderでは、StateNotifierProviderなど一部のProviderを廃止することでシンプルな構文を実現しています。
具体的にはGeneratedProviderを書く構文は、StatelessとStatefulの2種類しかありません。
#### Stateless
ManualProviderのころからあるProvider、FutureProvider、StreamProviderが属します。
Stateless系のProviderは初期化後の値を変更できません。

Statelessの場合Providerは関数として定義します。
関数の返り値の型によってProvider、FutureProvider、StreamProviderのいずれかが生成されます。

```dart
// hogeProviderを作る場合
@riverpod
String hoge(HogeRef ref) {
  return "hoge";
}
```

#### Stateful
riverpod_generatorのために新しく追加されたNotiferProvider、AsyncNotifierProvider、StreamNotifierProviderが属します。、StreamProviderが属します。
Stateful系のProviderは初期化後の値をStateとして持ち、Stateを更新することができます。

Statefulの場合Providerはクラスとして定義します。
buildメソッドの返り値の型によってNotiferProvider、AsyncNotifierProvider、StreamNotifierProviderのいずれかが生成されます。

```dart
// hogeProviderを作る場合
@riverpod
class Hoge extends _$Hoge {
  @override
  HogeState build() {
    return const HogeState();
  }

  void huga() {
    // ここでstateを操作
  }
}
```

### 強力なlintサポート
riverpod_lintというRiverpodのためのLintルールを提供するパッケージがあります。riverpod_lintは必ずしもriverpod_generatorだけのものではありませんが、その多くはriverpod_generator用のルールです。

https://pub.dev/packages/riverpod_lint

先ほど説明したようにGeneratedProviderはシンプルな構文で生成できるので、Lintの恩恵が受けやすいのでしょう。Riverpod作者のRemiさんが、今後多くのLintルールを追加して予定のようなので、その恩恵を最大限うけられるのはriverpod_generatorを使う大きなメリットでしょう。

https://twitter.com/remi_rousselet/status/1636402872278564872?s=20

### Familyプロバイダーで引数の自由度が高い
RiverpodにはFamilyという引数を受け取って、引数ごとに異なるProviderインスタンスを作る仕組みがあります。
ManualProviderのFamilyは引数を1つしか取れないという制限がありましたが、GeneratedProviderではこの点が改善されています。具体的には複数の引数を受け取ったり、Named Parameter・Optional parameterを使ったりと自由度が上がっています。

少し情報が古い記事ですが、以下の章で説明しています。

https://zenn.dev/toridori/articles/754f097b86911e#family

## まとめ
riverpod_generatorについて簡単に説明してみました。
需要がありそうなら、riverpod_generatorでの開発の始め方みたいな記事を書こうと思うので良いと思った人はいいねしてくれると参考になります。