---
title: "device_previewã¨Figmaã§Flutterã®Storeç”¨ã‚¹ã‚¯ã‚·ãƒ§ã‚’ç°¡å˜ã«ä½œã‚‹"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter", "iOS", "Android", "Figma", "å€‹äººé–‹ç™º"]
published: true
---
# ã¯ã˜ã‚ã«

Flutterã§ã„ã–ã‚¢ãƒ—ãƒªã‚’ä½œã£ãŸã‚‚ã®ã®Storeå‘ã‘ã®ã‚¹ã‚¯ã‚·ãƒ§ã®ä½œã‚Šæ–¹ãŒåˆ†ã‹ã‚‰ãªã„ã€ä½œã‚‹ã®ãŒã‚ã‚“ã©ãã•ã„ã¨ã„ã†ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯device_previewã¨Figmaã‚’ä½¿ã£ã¦ç°¡å˜ã«Storeç”¨ã®ã‚¹ã‚¯ã‚·ãƒ§ã‚’ä½œã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
ã“ã‚“ãªæ„Ÿã˜ã®ã‚¹ã‚¯ã‚·ãƒ§ãŒä½œã‚Œã¾ã™ã€‚

![SCR-20220708-dbq](/images/SCR-20220708-dbq.png)

# device_preview

Flutterã§æ§˜ã€…ãªæ¡ä»¶ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ç¢ºèªã™ã‚‹ã®ã«ä¾¿åˆ©ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚
ã“ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚
<https://zenn.dev/mamushi/articles/flutter_device_preview>
ä»Šå›ã¯device_preview_screenshotã¨ã„ã†device_previewã§ã‚¹ã‚¯ã‚·ãƒ§ãŒå–ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã„ã¾ã™ã€‚
<https://pub.dev/packages/device_preview_screenshot>
ã‚¹ã‚¯ã‚·ãƒ§ä½œã‚Šã§ç‰¹ã«é¢å€’ãªã®ãŒApp Storeå‘ã‘ã«è¤‡æ•°ã‚µã‚¤ã‚ºã®ã‚¹ã‚¯ã‚·ãƒ§ã‚’ç”¨æ„ã™ã‚‹ã“ã¨ã§ã™ãŒã€device_previewã‚’ä½¿ã†ã¨ã“ã‚ŒãŒã‹ãªã‚Šç°¡å˜ã«ãªã‚Šã¾ã™ã€‚

# Fimga

è¨€ã‚ãšã¨çŸ¥ã‚ŒãŸç„¡æ–™ã®UIãƒ‡ã‚¶ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
è‡ªåˆ†ã§1ã‹ã‚‰ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ä½œã‚‹ä»–ã«ã€Comminityã®ä½œã£ãŸãƒªã‚½ãƒ¼ã‚¹ã‚’ä½¿ã£ã¦ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ä½œã‚Šå§‹ã‚ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
ä»Šå›ã¯device_preview_screenshotã§ä½œã£ãŸã‚¹ã‚¯ã‚·ãƒ§ã‹ã‚‰ã€Storeç”¨ã®ã‚¹ã‚¯ã‚·ãƒ§ã‚’ç°¡å˜ã«ä½œã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚
<https://www.figma.com/community/file/1126487644801289768>

# device_preview_screenshotå°å…¥

device_previewã«åŠ ãˆã¦device_preview_screenshotã®ä¾å­˜ã‚’pubspec.yamlã«è¿½åŠ ã—ã¾ã™ã€‚
device_previewã®ä½¿ã„æ–¹è‡ªä½“ã¯å…ˆã»ã©ã®è¨˜äº‹ã‚’å‚ç…§ãã ã•ã„ã€‚

```yaml:pubspec.yaml
dependencies:
  device_preview: ^1.1.0
  device_preview_screenshot: ^1.0.0

```text

device_preview_screenshotã§æ’®ã£ãŸã‚¹ã‚¯ã‚·ãƒ§ã‚’Macã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ç§»ã™ã¨æ¥½ãªã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªhelperã‚’ä½œã‚Šã¾ã™ã€‚

```dart:device_preview_screenshot_helper.dart

// ignore_for_file: lines_longer_than_80_chars
import 'dart:io';

import 'package:device_preview_screenshot/device_preview_screenshot.dart';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:image/image.dart' as img;
import 'package:path_provider/path_provider.dart';
import 'package:provider/provider.dart';

/// Take a screenshotãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹
Future<void> onScreenshot(
  BuildContext context,
  DeviceScreenshot screenshot,
) async {
  final isFrameVisible = context.read<DevicePreviewStore>().data.isFrameVisible;

  final timestamp = DateTime.now();
  final tempDir = await getTemporaryDirectory();
  final file =
      await File('${tempDir.path}/${screenshot.device.name}_$timestamp.png')
          .create();
  // ãƒ•ãƒ¬ãƒ¼ãƒ ãŒã‚ã‚‹ã¨ãã¯ãã®ã¾ã¾æ›¸ãè¾¼ã‚€
  if (isFrameVisible) {
    file.writeAsBytesSync(screenshot.bytes);
  }
  // ãƒ•ãƒ¬ãƒ¼ãƒ ãŒç„¡ã„æ™‚ã¯å®Ÿéš›ã®ç”»é¢ã‚µã‚¤ã‚ºã«èª¿æ•´ã—ã¦ã‹ã‚‰æ›¸ãè¾¼ã‚€
  else {
    final rawImage = img.decodePng(screenshot.bytes);
    final resizedImage = img.copyResize(
      // ignore: avoid-non-null-assertion
      rawImage!,
      width: (screenshot.device.screenSize.width * screenshot.device.pixelRatio)
          .toInt(),
      height:
          (screenshot.device.screenSize.height * screenshot.device.pixelRatio)
              .toInt(),
    );
    file.writeAsBytesSync(img.encodePng(resizedImage));
  }

  final message = 'mv ${file.parent.path}/*.png ~/Desktop';
  if (kDebugMode) {
    print(message);
  }
  // ã‚¹ã‚¯ã‚·ãƒ§ãŒã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®pngãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ç§»å‹•ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚»ãƒƒãƒˆ
  await Clipboard.setData(
    ClipboardData(text: 'mv ${file.parent.path}/*.png ~/Desktop'),
  );
}

```text

device_previewã®åˆ©ç”¨ç®‡æ‰€ã«ã“ã®helperã‚’è¿½åŠ ã—ã¾ã™ã€‚

```dart:main.dart
DevicePreview(
  enabled: const bool.fromEnvironment('enable_device_preview'),
  tools: const [
    ...DevicePreview.defaultTools,
    DevicePreviewScreenshot(
    onScreenshot: onScreenshot,
    ),
],

```text

ã“ã¡ã‚‰ã®ãƒªãƒã‚¸ãƒˆãƒªã§åŒã˜ã‚ˆã†ãªã“ã¨ã‚’ã—ã¦ã‚‹ã®ã§ã€ã‚ˆã‹ã£ãŸã‚‰å‚è€ƒã«ã—ã¦ãã ã•ã„
<https://github.com/K9i-0/flutter_template>

# device_preview_screenshotã§ã‚¹ã‚¯ã‚·ãƒ§ã‚’ã¨ã‚‹

device_previewã®Take a screenshotãƒœã‚¿ãƒ³ã§ã‚¹ã‚¯ã‚·ãƒ§ãŒå–ã‚Œã¾ã™ã€‚
device_previewã®DEVICE->Modelã§ç«¯æœ«ã®ç¨®é¡ã‚’å¤‰æ›´ã—ã¤ã¤ä»¥ä¸‹ã®Modelã®ã‚¹ã‚¯ã‚·ãƒ§ã‚’å–ã‚Šã¾ã™ã€‚

- iPhone SEï¼ˆ5.5inchç”¨ï¼‰
- iPhone 13 Pro Maxï¼ˆ6.5inchç”¨ï¼‰
- iPad(11")ï¼ˆ12.9inchç”¨ï¼‰

å…ˆã»ã©ã®helperã‚’å°å…¥ã—ã¦ã„ã‚‹ã¨DEBUG CONSOLEã«ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰Macã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ç”»åƒã‚’ç§»å‹•ã•ã›ã‚‹ã‚³ãƒãƒ³ãƒ‰ãŒãƒ­ã‚°ã«å‡ºã¦ã„ã‚‹ã®ã§å®Ÿè¡Œã—ã¾ã™ã€‚
ã“ã†ã„ã†ã‚„ã¤ã§ã™ã€‚

```text
mv /Users/hoge/Library/Developer/CoreSimulator/Devices/hoge/data/Containers/Data/Application/hoge/Library/Caches/*.png ~/Desktop

```

# Fimgaã§Storeç”¨ã®ã‚¹ã‚¯ã‚·ãƒ§ã«åŠ å·¥ã™ã‚‹

### ãƒªã‚½ãƒ¼ã‚¹ã®ã‚³ãƒ”ãƒ¼

å…ˆã»ã©ã®Figmaãƒªã‚½ãƒ¼ã‚¹ã®ã‚³ãƒ”ãƒ¼ã‚’ä½œã‚Šã¾ã™ã€‚
<https://www.figma.com/community/file/1126487644801289768>
Get a copyã¨ã„ã†ãƒœã‚¿ãƒ³ã§ã™ã€‚
![SCR-20220707-9ve](/images/SCR-20220707-9ve.png)
ã“ã‚“ãªæ„Ÿã˜ã§åˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚
![SCR-20220707-9y4](/images/SCR-20220707-9y4.png)

### Streoç”¨ã‚¹ã‚¯ã‚·ãƒ§ã«åŠ å·¥

ã¾ãšã¯device_preview_screenshotã§å–ã£ãŸã‚¹ã‚¯ã‚·ãƒ§ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã™
![SCR-20220707-a2x](/images/SCR-20220707-a2x.png)
ã‚¹ã‚¯ã‚·ãƒ§ã‚’é‡ã­ã‚‹ã¨ãªã£ã¦ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é‡ã­ã¾ã™ã€‚
ç”»åƒã¯iPhone 13 Pro Maxã®ä¾‹ã§ã™ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é…ç½®ã•ã‚Œã‚‹ã¨Exportç”¨ã®FrameãŒæ›´æ–°ã•ã‚Œã¦ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚
å…¨ã¦ã®ã‚µã‚¤ã‚ºã§åŒã˜ã“ã¨ã‚’ã—ã¾ã™ã€‚
![SCR-20220707-a42](/images/SCR-20220707-a42.png)

### èƒŒæ™¯ã¨æ–‡å­—ã‚’ç·¨é›†

èƒŒæ™¯ã¨æ–‡è¨€ã‚‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚ç·¨é›†ã™ã‚‹ã¨Exportç”¨FrameãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚
![SCR-20220707-a6c](/images/SCR-20220707-a6c.png)

### è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã‚¹ã‚¯ã‚·ãƒ§ã‚’ä½œã‚‹

è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®Storeç”¨ã‚¹ã‚¯ã‚·ãƒ§ã‚’ä½œã‚‹éš›ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§Visibilityã‚’å¤‰æ›´ã™ã‚‹ã®ãŒæ¥½ã§ã™ã€‚
![SCR-20220707-a7j](/images/SCR-20220707-a7j.png)

### å‡ºåŠ›ã™ã‚‹

å‡ºåŠ›ã—ãŸã„Frameã‚’é¸æŠã—ãŸçŠ¶æ…‹ã§Exportãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ç”»åƒãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚
![SCR-20220707-a91](/images/SCR-20220707-a91.png)

### Storeã§ä½¿ã†

å¾Œã¯Storeã«æå‡ºæ™‚ã«ä½œæˆã—ãŸStoreç”¨ã‚¹ã‚¯ã‚·ãƒ§ã‚’ä½¿ã£ã¦çµ‚äº†ã§ã™ã€‚
ä½¿ã„æ–¹ã‚’ç†è§£ã—ã¦ã—ã¾ãˆã°ã‹ãªã‚Šç°¡å˜ã«ãã‚Œã£ã½ã„Storeç”¨ã‚¹ã‚¯ã‚·ãƒ§ã‚’ç„¡æ–™ã§ä½œã‚Œã¾ã™ã€‚

# ãŠã¾ã‘

ä¾‹ã«ä½¿ã£ã¦ã‚‹ç”»åƒã®ã‚¢ãƒ—ãƒªã§ã™ã€‚æ°—ãŒå‘ã„ãŸã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ã‚‰ãˆã‚‹ã¨å¬‰ã—ã„ã§ã™ğŸ¥³
iOS
<https://apps.apple.com/app/id1630517046>
Android
<https://play.google.com/store/apps/details?id=com.k9i.eatzy>
