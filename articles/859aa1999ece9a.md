---
title: "masonãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã£ã¦ã€å€‹äººç”¨brickã‚’ç®¡ç†ã—ã€ç•°æ¬¡å…ƒã®Flutteré–‹ç™ºã‚’æ¤œè¨ã™ã‚‹"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter", "mason", "Dart"]
publication_name: "toridori"
published: true
---
# ã¯ã˜ã‚ã«
[mason](https://pub.dev/packages/mason)ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã¨brickã¨ã„ã†å˜ä½ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚‚ã¨ã«ã€ç°¡å˜ã«ã‚³ãƒ¼ãƒ‰ç”ŸæˆãŒè¡Œãˆã¾ã™ã€‚masonè‡ªä½“ã®èª¬æ˜ã¯ä»¥ä¸‹ã®è¨˜äº‹ãŒãŠã™ã™ã‚ã§ã™ã€‚

https://zenn.dev/razokulover/articles/d0453fd2bbeffc

ä»Šå›ã¯ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆå‘ã‘ã«ã€ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹brickã‚’ä½œã‚Šã¾ã™ã€‚
- libä¸‹ã«featuresãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãŒã‚ã‚‹
- featuresãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸‹ã«ã¯æ©Ÿèƒ½åã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª(ç”»åƒã§ã¯hoge)ãŒã‚ã‚‹
- æ©Ÿèƒ½ã¯dataã€modelã€uiã®ä¸‰ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«åˆ†ã‹ã‚Œã¦ã„ã‚‹
- åˆæœŸçŠ¶æ…‹ã§hoge_repository.dartã€hoge_state.dartã€hoge_notifier.dartã€hoge_screen.dartãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹

```
lib
â”œâ”€â”€ features
â”‚   â””â”€â”€ hoge
â”‚       â”œâ”€â”€ data
â”‚       â”‚   â””â”€â”€ hoge_repository.dart
â”‚       â”œâ”€â”€ model
â”‚       â”‚   â””â”€â”€ hoge_state.dart
â”‚       â””â”€â”€ ui
â”‚           â”œâ”€â”€ hoge_notifier.dart
â”‚           â””â”€â”€ hoge_screen.dart
```

:::details ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°
å„ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯ä»¥ä¸‹
```dart:hoge_repository.dart
import 'package:hooks_riverpod/hooks_riverpod.dart';

final hogeRepositoryProvider = Provider<HogeRepository>(
  (ref) {
    return HogeRepository(ref);
  },
);

class HogeRepository {
  final Ref _ref;
  const HogeRepository(this._ref);
}
```
```dart:hoge_state.dart
// ignore: unused_import, directives_ordering
import 'package:flutter/foundation.dart';
import 'package:freezed_annotation/freezed_annotation.dart';

part 'hoge_state.freezed.dart';

@freezed
class HogeState with _$HogeState {
  const factory HogeState({
    required String id,
  }) = _HogeState;
}
```
```dart:hoge_notifier.dart
import 'package:hooks_riverpod/hooks_riverpod.dart';

import '../model/hoge_state.dart';

final hogeNotifierProvider = NotifierProvider<HogeNotifier, HogeState>(
  () => HogeNotifier(),
);

class HogeNotifier extends Notifier<HogeState> {
  @override
  HogeState build() {
    return const HogeState(id: 'id');
  }
}
```
```dart:hoge_screen.dart
import 'package:flutter/material.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';

class HogeScreen extends HookConsumerWidget {
  const HogeScreen({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Hoge'),
      ),
      body: const Center(
        child: Text('Hoge'),
      ),
    );
  }
}
```
:::

# brickã®ç®¡ç†æ–¹æ³•
brickã¯ä»¥ä¸‹ã®ä¸‰ã¤ã®ç®¡ç†æ–¹æ³•ï¼ˆmason.yamlã§ã®æŒ‡å®šæ–¹æ³•ï¼‰ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

1. BrickHubã«ç™»éŒ²ã™ã‚‹ï¼ˆBrickHubæŒ‡å®šï¼‰
2. å°‚ç”¨Githubãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ï¼ˆgitæŒ‡å®šï¼‰
3. Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã©ã¨åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹æŒ‡å®šï¼‰

ãã‚Œãã‚Œãƒ¡ãƒªãƒ‡ãƒ¡ã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯2ã®ã€Œå°‚ç”¨Githubãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ã€æ–¹æ³•ã‚’æ¡ç”¨ã—ã¾ã™ã€‚
å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒªãƒã‚¸ãƒˆãƒªï¼ˆä»¥ä¸‹masonãƒªãƒã‚¸ãƒˆãƒªï¼‰ã‚’ç”¨æ„ã—ã¾ã™ã€‚

https://github.com/K9i-0/mason

masonãƒªãƒã‚¸ãƒˆãƒªã«ã¯bricksã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚Šã€ãã®ä¸­ã«è¤‡æ•°ã®brickã‚’æ ¼ç´ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚


:::details ä½¿ã„åˆ†ã‘
BrickHubã«ç™»éŒ²ã™ã‚‹ï¼ˆBrickHubæŒ‡å®šï¼‰
- ã„ã‚ã‚“ãªäººã«ä½¿ã£ã¦ã‚‚ã‚‰ã„ãŸã„æ±ç”¨çš„ãªã‚‚ã®
- BrickHubå†…ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªåå‰ã«ãªã‚‹ã“ã¨ã«æ³¨æ„
å°‚ç”¨Githubãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ï¼ˆgitæŒ‡å®šï¼‰
- å€‹äººã‚„ãƒãƒ¼ãƒ å‘ã‘ã®ã‚‚ã®
- è¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã„ãŸã„å ´åˆ
Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã©ã¨åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹æŒ‡å®šï¼‰
- å€‹äººã‚„ãƒãƒ¼ãƒ å‘ã‘ã®ã‚‚ã®
- å˜ä¸€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã„ãŸã„å ´åˆ
:::

## åˆ©ç”¨å´ã®è¨˜è¿°
githubãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ã„ã‚‹brickã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯mason.yamlãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚
```yaml:mason.yaml
bricks:
  feature:
    git:
      url: https://github.com/K9i-0/mason.git
      path: bricks/feature
```
## brickã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
å„brickã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯git tagã§ç®¡ç†ã—ã¾ã™ã€‚ä»Šå›ã¯tagåã‚’brickå+ãƒãƒ¼ã‚¸ãƒ§ãƒ³åå«ã‚ãŸä»¥ä¸‹ã®å½¢å¼ã«ã—ã¾ã™ã€‚

- feature-v0.1.0
  - æ©Ÿèƒ½å: feature
  - ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 0.1.0

tagã‚’æŒ‡å®šã™ã‚‹å ´åˆä»¥ä¸‹ã®ã‚ˆã†ã«refã‚’è¿½è¨˜ã—ã¾ã™ã€‚ã“ã‚Œã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒç®¡ç†ã§ãã¾ã™ã€‚
```yaml:mason.yaml
bricks:
  feature:
    git:
      url: https://github.com/K9i-0/mason.git
      path: bricks/feature
      ref: feature-v0.1.0
```

# brickã‚’æ›¸ã
è©³ç´°ã¯å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã‚‚ã‚‰ã†ã®ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚
https://github.com/K9i-0/mason/tree/main/bricks/feature

ãƒã‚¤ãƒ³ãƒˆ
- varsã§å—ã‘å–ã£ãŸnameã‚’ãƒ‘ã‚¹ã€ãƒ•ã‚¡ã‚¤ãƒ«åã€ã‚¯ãƒ©ã‚¹åç­‰ã«ä½¿ã†
- .snakeCaseãªã©ã‚’ä½¿ã£ã¦é©åˆ‡ãªCaseã«å¤‰æ›ã™ã‚‹

# ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã™ã‚‹

ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã§ä½œã£ãŸbrickã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚
https://github.com/K9i-0/mason_sample

1. ã™ã§ã«èª¬æ˜ã—ãŸæ–¹æ³•ã§mason.yamlã‚’ç·¨é›†
2. mason getã§brickã‚’å–å¾—
3. mason make featureã§brickã‚’å®Ÿè¡Œ
4. æ©Ÿèƒ½åã‚’èã‹ã‚Œã‚‹ã®ã§è§£ç­”
ä»¥ä¸Šã®ã‚¹ãƒ†ãƒƒãƒ—ã§ç°¡å˜ã«æ©Ÿèƒ½ã®ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã§ãã¾ã—ãŸã€‚

# ã¾ã¨ã‚
- å€‹äººç”¨ã®brickã‚’ãƒªãƒã‚¸ãƒˆãƒªç®¡ç†ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã—ãŸã€‚
- è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§åŒã˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã„ãŸã„ã¨ãbrickãŒã‚ã‚‹ã¨ä¾¿åˆ©ãã†ã§ã™ã€‚brickã¯è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ãŸã‚Šã§ãã‚‹ç‚¹ãŒä¾¿åˆ©ã§ã™ã­ã€‚

## ãƒ•ã‚¡ã‚¤ãƒ«å†…ã«é–‰ã˜ãŸãƒ†ãƒ³ãƒ—ãƒ¬ã«é–¢ã—ã¦ã¯ã‚¹ãƒ‹ãƒšãƒƒãƒˆãŒãŠã™ã™ã‚ã§ã™

https://zenn.dev/k9i/articles/70798511bac2b9

## masonã®æ„å‘³
masonã¯çŸ³å·¥ã¨ã„ã†æ„å‘³ã‚‰ã—ã„ã§ã™ã€‚ã‚ˆãä½¿ã†è¨€è‘‰ã ã¨ãƒ•ãƒªãƒ¼ãƒ¡ã‚¤ã‚½ãƒ³ã®ãƒ¡ã‚¤ã‚½ãƒ³ã§ã™ã­

https://ja.wikipedia.org/wiki/%E3%83%95%E3%83%AA%E3%83%BC%E3%83%A1%E3%82%A4%E3%82%BD%E3%83%B3